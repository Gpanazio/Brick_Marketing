<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRICK AI ‚Äî Workflow Builder</title>
    <meta name="description" content="Visual Workflow Builder ‚Äî Monte pipelines livres com qualquer prompt e modelo">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/workflow-builder.css">
</head>

<body>
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOOLBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <header class="toolbar" id="toolbar">
        <div class="toolbar-left">
            <div class="toolbar-logo">BRICK<span class="logo-accent">AI</span></div>
            <span class="toolbar-divider">//</span>
            <span class="toolbar-title">WORKFLOW_BUILDER</span>
        </div>
        <div class="toolbar-center">
            <input class="toolbar-input" id="workflowName" type="text" value="" placeholder="Nome do workflow..."
                spellcheck="false">
        </div>
        <div class="toolbar-right">
            <button class="btn btn-ghost btn-tutorial" id="btnTutorial" onclick="WorkflowBuilder.showTutorial()">?
                TUTORIAL</button>
            <button class="btn btn-ghost" id="btnNew" onclick="WorkflowBuilder.newWorkflow()">NEW</button>
            <button class="btn btn-ghost" id="btnLoad" onclick="WorkflowBuilder.showLoadModal()">LOAD</button>
            <button class="btn btn-ghost" id="btnSave" onclick="WorkflowBuilder.saveWorkflow()">SAVE</button>
            <button class="btn btn-primary" id="btnRun" onclick="WorkflowBuilder.showRunModal()">‚ñ∂ RUN</button>
            <a class="btn btn-ghost" href="/index.html" style="text-decoration:none;">‚Üê DASHBOARD</a>
        </div>
    </header>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN LAYOUT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="main-layout">
        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ SIDEBAR: TOOLS ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">COMPONENTES</div>
                <div class="sidebar-subtitle">Adicione n√≥s ao canvas</div>
            </div>
            <input class="sidebar-search" id="agentSearch" type="text" placeholder="Buscar template..."
                spellcheck="false">
            <div class="filter-bar">
                <span class="filter-tag active" data-filter="all">TODOS</span>
                <span class="filter-tag" data-filter="free">LIVRES</span>
                <span class="filter-tag" data-filter="marketing">MKT</span>
                <span class="filter-tag" data-filter="ideias">IDEIAS</span>
                <span class="filter-tag" data-filter="projetos">PROJ</span>
                <span class="filter-tag" data-filter="originais">ORIG</span>
            </div>
            <div class="agents-list" id="agentsList">
                <!-- populated by JS -->
            </div>
        </aside>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ CANVAS ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <main class="canvas-container" id="canvas">
            <div class="canvas-grid"></div>
            <div class="canvas-world">
                <svg class="canvas-svg" xmlns="http://www.w3.org/2000/svg"></svg>
                <div class="canvas-nodes"></div>
            </div>
            <div class="canvas-hint" id="canvasHint">
                <div class="hint-icon">‚äû</div>
                <div>Conecte <strong>RAW IDEA</strong> ao primeiro agente</div>
                <div class="hint-sub">Clique em + N√ì LIVRE para adicionar agentes</div>
            </div>
        </main>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ CONFIG PANEL ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <aside class="config-panel" id="configPanel">
            <div class="config-header">
                <div class="config-header-title">CONFIGURA√á√ÉO</div>
            </div>
            <div class="config-body">
                <div class="config-empty">Selecione um n√≥<br>para configurar</div>
            </div>
        </aside>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STATUS BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <footer class="statusbar">
        <div class="statusbar-left"></div>
        <div class="statusbar-right"></div>
    </footer>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODALS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

    <!-- Save Modal -->
    <div class="modal-overlay" id="saveModal">
        <div class="modal" style="max-width:420px;">
            <div class="modal-header">
                <div class="modal-title">üíæ SALVAR WORKFLOW</div>
                <button class="modal-close" onclick="WorkflowBuilder.closeModal('saveModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="config-label" style="margin-bottom:8px;">NOME DO WORKFLOW</div>
                <input class="config-input" id="saveNameInput" type="text" placeholder="Ex: Pipeline de Conte√∫do..."
                    spellcheck="false" onkeydown="if(event.key==='Enter') WorkflowBuilder.confirmSave()">
                <button class="btn btn-primary" onclick="WorkflowBuilder.confirmSave()"
                    style="margin-top:12px;width:100%;">‚úì SALVAR</button>
            </div>
        </div>
    </div>

    <!-- Load Modal -->
    <div class="modal-overlay" id="loadModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">CARREGAR WORKFLOW</div>
                <button class="modal-close" onclick="WorkflowBuilder.closeModal('loadModal')">&times;</button>
            </div>
            <div class="modal-body"></div>
        </div>
    </div>

    <!-- Run Modal -->
    <div class="modal-overlay" id="runModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">EXECUTAR WORKFLOW</div>
                <button class="modal-close" onclick="WorkflowBuilder.closeModal('runModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="config-label" style="margin-bottom:8px;">BRIEFING (ser√° injetado no RAW IDEA)</div>
                <textarea class="config-textarea" id="runBriefing" placeholder="Cole o briefing / ideia aqui..."
                    style="min-height:180px;"></textarea>
                <button class="btn btn-primary" onclick="WorkflowBuilder.runWorkflow()"
                    style="margin-top:12px;width:100%;">‚ñ∂ INICIAR PIPELINE</button>
            </div>
        </div>
    </div>

    <!-- Role Preview Modal -->
    <div class="modal-overlay" id="roleModal">
        <div class="modal" style="max-width:700px;">
            <div class="modal-header">
                <div class="modal-title">ROLE PREVIEW</div>
                <button class="modal-close" onclick="WorkflowBuilder.closeModal('roleModal')">&times;</button>
            </div>
            <div class="modal-body" style="max-height:500px;overflow-y:auto;"></div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TUTORIAL MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="modal-overlay" id="tutorialModal">
        <div class="modal tutorial-modal">
            <div class="modal-header">
                <div class="modal-title">üìñ TUTORIAL ‚Äî WORKFLOW BUILDER</div>
                <button class="modal-close" onclick="WorkflowBuilder.closeModal('tutorialModal')">&times;</button>
            </div>
            <div class="modal-body tutorial-body">

                <div class="tutorial-section">
                    <h3>üî¥ O que √© o Workflow Builder?</h3>
                    <p>√â um construtor visual de pipelines de IA. Cada <strong>n√≥</strong> √© um agente com seu pr√≥prio
                        prompt e modelo. Voc√™ conecta os n√≥s em sequ√™ncia, e o output de um vira o input do pr√≥ximo.</p>
                </div>

                <div class="tutorial-section">
                    <h3>üì• RAW IDEA (N√≥ de Entrada)</h3>
                    <p>Todo workflow come√ßa com o <strong>RAW IDEA</strong>. Ele representa o briefing que o usu√°rio
                        digita ao clicar em "RUN". Esse texto √© injetado como input para o primeiro agente conectado.
                    </p>
                    <div class="tutorial-example">
                        <strong>Exemplo de briefing:</strong><br>
                        <em>"Criar campanha de lan√ßamento para novo produto de skincare org√¢nico, p√∫blico feminino 25-40
                            anos, tom sofisticado e clean."</em>
                    </div>
                </div>

                <div class="tutorial-section">
                    <h3>‚ûï Criando N√≥s</h3>
                    <p>Clique em <span class="tutorial-highlight">+ N√ì LIVRE</span> na sidebar. Cada n√≥ precisa de:</p>
                    <ul>
                        <li><strong>Nome</strong> ‚Äî identifica√ß√£o visual (ex: "Pesquisador", "Copywriter")</li>
                        <li><strong>System Prompt</strong> ‚Äî a personalidade e instru√ß√µes do agente</li>
                        <li><strong>Modelo</strong> ‚Äî qual LLM vai executar (Gemini, GPT, Claude, etc)</li>
                    </ul>
                </div>

                <div class="tutorial-section">
                    <h3>üîó Conectando N√≥s</h3>
                    <p>Cada n√≥ tem <strong>portas</strong>:</p>
                    <ul>
                        <li><strong>Porta de sa√≠da</strong> (‚Üí direita) ‚Äî arraste daqui...</li>
                        <li><strong>Porta de entrada</strong> (‚Üê esquerda) ‚Äî ...at√© aqui</li>
                    </ul>
                    <p>O <strong>output completo</strong> do n√≥ anterior √© passado como <code>user message</code> para o
                        pr√≥ximo n√≥. Isso significa que cada agente recebe o texto gerado pelo agente anterior.</p>
                </div>

                <div class="tutorial-section">
                    <h3>üìù Prompts Ideais para System Prompt</h3>
                    <p>O system prompt define <em>quem</em> o agente √© e <em>como</em> ele deve processar o input.
                        Dicas:</p>

                    <div class="tutorial-example">
                        <strong>N√≥ 1 ‚Äî Pesquisador:</strong><br>
                        <code>Voc√™ √© um pesquisador de mercado s√™nior. Analise o briefing recebido e produza um relat√≥rio com: 1) An√°lise do p√∫blico-alvo, 2) Tend√™ncias do segmento, 3) Oportunidades de posicionamento, 4) Refer√™ncias de campanhas similares. Seja espec√≠fico e cite dados quando poss√≠vel.</code>
                    </div>

                    <div class="tutorial-example">
                        <strong>N√≥ 2 ‚Äî Estrategista:</strong><br>
                        <code>Voc√™ √© um estrategista de marketing. Com base na pesquisa recebida, crie um plano estrat√©gico com: 1) Big Idea da campanha, 2) Pillars de comunica√ß√£o, 3) Canais priorit√°rios, 4) Cronograma sugerido. Use o relat√≥rio anterior como base factual.</code>
                    </div>

                    <div class="tutorial-example">
                        <strong>N√≥ 3 ‚Äî Copywriter:</strong><br>
                        <code>Voc√™ √© um copywriter criativo. Com base na estrat√©gia recebida, produza: 1) Headline principal, 2) 5 varia√ß√µes de copy para social media, 3) Texto para landing page, 4) CTA principal. Mantenha o tom de voz indicado na estrat√©gia.</code>
                    </div>
                </div>

                <div class="tutorial-section">
                    <h3>üîÑ O que um n√≥ passa para o outro?</h3>
                    <p>A cadeia funciona assim:</p>
                    <div class="tutorial-chain">
                        <div class="chain-step">
                            <span class="chain-label">RAW IDEA</span>
                            <span class="chain-arrow">‚Üí</span>
                            <span class="chain-data">briefing do usu√°rio</span>
                        </div>
                        <div class="chain-step">
                            <span class="chain-label">Agente 1</span>
                            <span class="chain-arrow">‚Üí</span>
                            <span class="chain-data">recebe briefing, gera pesquisa</span>
                        </div>
                        <div class="chain-step">
                            <span class="chain-label">Agente 2</span>
                            <span class="chain-arrow">‚Üí</span>
                            <span class="chain-data">recebe pesquisa, gera estrat√©gia</span>
                        </div>
                        <div class="chain-step">
                            <span class="chain-label">Agente 3</span>
                            <span class="chain-arrow">‚Üí</span>
                            <span class="chain-data">recebe estrat√©gia, gera copies</span>
                        </div>
                    </div>
                    <p style="margin-top:8px;color:var(--gray-500);font-size:10px;">Cada agente recebe o texto COMPLETO
                        gerado pelo n√≥ anterior como mensagem do usu√°rio.</p>
                </div>

                <div class="tutorial-section">
                    <h3>üîÄ Conex√µes Paralelas</h3>
                    <p>Se um n√≥ tem mais de uma sa√≠da, os n√≥s seguintes rodam em <strong>paralelo</strong> ‚Äî √∫til para
                        gerar varia√ß√µes (ex: 3 copywriters diferentes recebendo a mesma estrat√©gia).</p>
                </div>

                <div class="tutorial-section">
                    <h3>üîÅ Loops</h3>
                    <p>Use loops para itera√ß√£o (ex: um revisor que devolve para o copywriter se a qualidade estiver
                        abaixo de um threshold). Configure a condi√ß√£o e o m√°ximo de itera√ß√µes.</p>
                </div>

                <div class="tutorial-section">
                    <h3>üíæ Salvando</h3>
                    <p>Ao salvar, o workflow fica dispon√≠vel em <strong>Custom Nodes</strong> no dashboard. Voc√™ pode
                        reutiliz√°-lo a qualquer momento.</p>
                </div>

            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOAST CONTAINER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="toast-container"></div>

    <script src="/workflow-builder.js"></script>
</body>

</html>