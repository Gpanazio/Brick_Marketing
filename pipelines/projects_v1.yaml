name: "Brick AI Projects Pipeline v1"
description: "Pipeline focado em Concepção Criativa e Projetos Especiais (6 etapas)."
version: "1.0"

variables:
  # Caminho dos roles específicos de projeto (ajuste se necessário)
  roles_dir: "~/projects/Brick_Marketing/roles/proposal"
  wip_dir: "~/projects/Brick_Marketing/history/projetos/wip"

steps:
  - id: "01_brand_digest"
    name: "Brand Digest"
    agent: "main"
    model: "flash"
    timeout: 90
    task: |
      Você é o BRAND_DIGEST.
      **Job ID:** {{job_id}}
      **Leia:**
      1. Role: {{roles_dir}}/01_BRAND_DIGEST.md
      2. Briefing: {{input_file}}
      **Output:**
      - Salve JSON em: {{wip_dir}}/{{job_id}}_01_BRAND_DIGEST.json
      - Extraia: Tom de voz, arquétipo, diferenciais, "não-negociáveis".
    output_check:
      file: "{{wip_dir}}/{{job_id}}_01_BRAND_DIGEST.json"
      condition: "exists"

  - id: "02_ideation"
    name: "Creative Ideation"
    model: "sonnet" # Sonnet é melhor pra criatividade
    timeout: 180
    task: |
      Você é o CREATIVE_IDEATION.
      **Job ID:** {{job_id}}
      **Leia:**
      1. Role: {{roles_dir}}/02_CREATIVE_IDEATION.md
      2. Briefing: {{input_file}}
      3. Brand Digest: {{wip_dir}}/{{job_id}}_01_BRAND_DIGEST.json
      **Output:**
      - Salve Markdown em: {{wip_dir}}/{{job_id}}_02_CREATIVE_IDEATION.md
      - Gere 3 conceitos criativos distintos (Big Idea, Racional, Referências).
    output_check:
      file: "{{wip_dir}}/{{job_id}}_02_CREATIVE_IDEATION.md"
      condition: "exists"

  - id: "03_concept_critic"
    name: "Concept Critic"
    model: "flash"
    timeout: 90
    task: |
      Você é o CONCEPT_CRITIC.
      **Job ID:** {{job_id}}
      **Leia:**
      1. Role: {{roles_dir}}/03_CONCEPT_CRITIC.md
      2. Ideation: {{wip_dir}}/{{job_id}}_02_CREATIVE_IDEATION.md
      **Output:**
      - Salve JSON em: {{wip_dir}}/{{job_id}}_03_CONCEPT_CRITIC.json
      - Escolha o conceito vencedor e justifique.
    output_check:
      file: "{{wip_dir}}/{{job_id}}_03_CONCEPT_CRITIC.json"
      condition: "exists"

  - id: "04_execution_design"
    name: "Execution Design"
    model: "gpt" # Raciocínio lógico/estrutural
    timeout: 120
    task: |
      Você é o EXECUTION_DESIGN.
      **Job ID:** {{job_id}}
      **Leia:**
      1. Role: {{roles_dir}}/04_EXECUTION_DESIGN.md
      2. Concept Winner: {{wip_dir}}/{{job_id}}_03_CONCEPT_CRITIC.json
      **Output:**
      - Salve Markdown em: {{wip_dir}}/{{job_id}}_04_EXECUTION_DESIGN.md
      - Defina: Formato, Visual Style, Key Visual, Estrutura do Roteiro.
    output_check:
      file: "{{wip_dir}}/{{job_id}}_04_EXECUTION_DESIGN.md"
      condition: "exists"

  - id: "05_copywriter"
    name: "Project Copywriter"
    model: "sonnet"
    timeout: 180
    task: |
      Você é o COPYWRITER (Projetos).
      **Job ID:** {{job_id}}
      **Leia:**
      1. Role: {{roles_dir}}/05_COPYWRITER.md
      2. Execution Design: {{wip_dir}}/{{job_id}}_04_EXECUTION_DESIGN.md
      **Output:**
      - Salve Markdown em: {{wip_dir}}/{{job_id}}_05_COPYWRITER.md
      - Escreva o roteiro completo seguindo as diretrizes de execução.
    output_check:
      file: "{{wip_dir}}/{{job_id}}_05_COPYWRITER.md"
      condition: "exists"

  - id: "06_director"
    name: "Director Final"
    model: "opus"
    timeout: 180
    task: |
      Você é o DIRECTOR.
      **Job ID:** {{job_id}}
      **Leia:**
      1. Role: {{roles_dir}}/06_DIRECTOR.md
      2. Copy: {{wip_dir}}/{{job_id}}_05_COPYWRITER.md
      3. Briefing: {{input_file}}
      **Output:**
      - Salve Markdown em: {{wip_dir}}/{{job_id}}_06_DIRECTOR.md
      - Faça o polimento final e valide contra o briefing original.
    output_check:
      file: "{{wip_dir}}/{{job_id}}_06_DIRECTOR.md"
      condition: "exists"
